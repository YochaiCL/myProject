{"ast":null,"code":"import _classCallCheck from\"C:/Users/yocha/OneDrive/Desktop/gitHubProjects/finalProject/Final-Project/client/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/yocha/OneDrive/Desktop/gitHubProjects/finalProject/Final-Project/client/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"C:/Users/yocha/OneDrive/Desktop/gitHubProjects/finalProject/Final-Project/client/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"C:/Users/yocha/OneDrive/Desktop/gitHubProjects/finalProject/Final-Project/client/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from'react';import Button from'../../pageSettings/button/Button';import style from'./userData.module.css';import{Link}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var UserData=/*#__PURE__*/function(_Component){_inherits(UserData,_Component);var _super=_createSuper(UserData);function UserData(){var _this;_classCallCheck(this,UserData);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={userData:'',showLinkAdmin:false,password:'',email:'',name:''};_this.logout=function(){window.localStorage.clear();window.location.href='./';};_this.changePassword=function(){var user=_this.state.userData;user.password=_this.state.password;console.log(user);fetch('http://localhost:5000/userData/changePassword',{method:'POST',crossDomain:true,headers:{'Content-Type':'application/json',Accept:'application/json','Access-Control-Allow-Origin':'*'},body:JSON.stringify({user:user,email:_this.state.userData.email})}).then(function(res){return res.json();}).then(function(data){console.log(data);});};_this.changeName=function(){var user=_this.state.userData;user.fullName=_this.state.name;_this.setState({userData:user});console.log(user);fetch('http://localhost:5000/userData/changeNameOrEmail',{method:'POST',crossDomain:true,headers:{'Content-Type':'application/json',Accept:'application/json','Access-Control-Allow-Origin':'*'},body:JSON.stringify({user:user,email:_this.state.userData.email})}).then(function(res){return res.json();}).then(function(data){console.log(data);});};_this.changeEmail=function(){var user=_this.state.userData;user.email=_this.state.email;_this.setState({userData:user});fetch('http://localhost:5000/userData/changeNameOrEmail',{method:'POST',crossDomain:true,headers:{'Content-Type':'application/json',Accept:'application/json','Access-Control-Allow-Origin':'*'},body:JSON.stringify({user:user,email:_this.state.userData.email})}).then(function(res){return res.json();}).then(function(data){console.log(data);});};return _this;}_createClass(UserData,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;fetch('http://localhost:5000/userData',{method:'POST',crossDomain:true,headers:{'Content-Type':'application/json',Accept:'application/json','Accept-Control-Allow-Origin':'*'},body:JSON.stringify({token:window.localStorage.getItem('token')})}).then(function(res){return res.json();}).then(function(data){console.log(data,'userData');window.localStorage.setItem('user',JSON.stringify(data.data));_this2.setState({userData:data.data});if(_this2.state.userData.userType==='Admin'){_this2.setState({showLinkAdmin:true});}});}/**\r\n   * This a function that clean all information in the local storage\r\n   */},{key:\"render\",value:function render(){var _this3=this;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"section\",{className:style.section,children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Name:\",' ',/*#__PURE__*/_jsx(\"span\",{className:style.span,children:this.state.userData.fullName})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Email:\",' ',/*#__PURE__*/_jsx(\"span\",{className:style.span,children:this.state.userData.email})]})]}),/*#__PURE__*/_jsx(\"section\",{children:/*#__PURE__*/_jsx(Button,{text:\"sign out\",fun:this.logout})}),this.state.showLinkAdmin&&/*#__PURE__*/_jsx(\"section\",{children:/*#__PURE__*/_jsx(Link,{to:\"/adminHome\",children:\"Transfer to Admin home\"})}),/*#__PURE__*/_jsxs(\"section\",{className:style.change,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Change UserName\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Enter name\",onChange:function onChange(e){return _this3.setState({name:e.target.value});}}),/*#__PURE__*/_jsx(Button,{text:\"Change\",fun:this.changeName})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Change Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"Enter email\",onChange:function onChange(e){return _this3.setState({email:e.target.value});}}),/*#__PURE__*/_jsx(Button,{text:\"Change\",fun:this.changeEmail})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Change Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Enter password\",onChange:function onChange(e){return _this3.setState({password:e.target.value});}})]}),/*#__PURE__*/_jsx(Button,{text:\"Change\",fun:this.changePassword})]})]});}}]);return UserData;}(Component);export{UserData as default};","map":{"version":3,"names":["React","Component","Button","style","Link","UserData","state","userData","showLinkAdmin","password","email","name","logout","window","localStorage","clear","location","href","changePassword","user","console","log","fetch","method","crossDomain","headers","Accept","body","JSON","stringify","then","res","json","data","changeName","fullName","setState","changeEmail","token","getItem","setItem","userType","section","span","change","e","target","value"],"sources":["C:/Users/yocha/OneDrive/Desktop/gitHubProjects/finalProject/Final-Project/client/src/components/pageSettings/userData/UserData.js"],"sourcesContent":["import React, { Component } from 'react';\r\nimport Button from '../../pageSettings/button/Button';\r\nimport style from './userData.module.css';\r\nimport { Link } from 'react-router-dom';\r\n\r\nexport default class UserData extends Component {\r\n  state = {\r\n    userData: '',\r\n    showLinkAdmin: false,\r\n    password: '',\r\n    email: '',\r\n    name: '',\r\n  };\r\n  componentDidMount() {\r\n    fetch('http://localhost:5000/userData', {\r\n      method: 'POST',\r\n      crossDomain: true,\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        Accept: 'application/json',\r\n        'Accept-Control-Allow-Origin': '*',\r\n      },\r\n      body: JSON.stringify({\r\n        token: window.localStorage.getItem('token'),\r\n      }),\r\n    })\r\n      .then(res => res.json())\r\n      .then(data => {\r\n        console.log(data, 'userData');\r\n        window.localStorage.setItem('user', JSON.stringify(data.data));\r\n        this.setState({ userData: data.data });\r\n\r\n        if (this.state.userData.userType === 'Admin') {\r\n          this.setState({\r\n            showLinkAdmin: true,\r\n          });\r\n        }\r\n      });\r\n  }\r\n\r\n  /**\r\n   * This a function that clean all information in the local storage\r\n   */\r\n  logout = () => {\r\n    window.localStorage.clear();\r\n    window.location.href = './';\r\n  };\r\n\r\n  changePassword = () => {\r\n    let user = this.state.userData;\r\n    user.password = this.state.password;\r\n    console.log(user);\r\n    fetch('http://localhost:5000/userData/changePassword', {\r\n      method: 'POST',\r\n      crossDomain: true,\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        Accept: 'application/json',\r\n        'Access-Control-Allow-Origin': '*',\r\n      },\r\n      body: JSON.stringify({\r\n        user: user,\r\n        email: this.state.userData.email,\r\n      }),\r\n    })\r\n      .then(res => res.json())\r\n      .then(data => {\r\n        console.log(data);\r\n      });\r\n  };\r\n\r\n  changeName = () => {\r\n    let user = this.state.userData;\r\n    user.fullName = this.state.name;\r\n    this.setState({ userData: user });\r\n    console.log(user);\r\n    fetch('http://localhost:5000/userData/changeNameOrEmail', {\r\n      method: 'POST',\r\n      crossDomain: true,\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        Accept: 'application/json',\r\n        'Access-Control-Allow-Origin': '*',\r\n      },\r\n      body: JSON.stringify({\r\n        user: user,\r\n        email: this.state.userData.email,\r\n      }),\r\n    })\r\n      .then(res => res.json())\r\n      .then(data => {\r\n        console.log(data);\r\n      });\r\n  };\r\n\r\n  changeEmail = () => {\r\n    let user = this.state.userData;\r\n    user.email = this.state.email;\r\n    this.setState({ userData: user });\r\n    fetch('http://localhost:5000/userData/changeNameOrEmail', {\r\n      method: 'POST',\r\n      crossDomain: true,\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        Accept: 'application/json',\r\n        'Access-Control-Allow-Origin': '*',\r\n      },\r\n      body: JSON.stringify({\r\n        user: user,\r\n        email: this.state.userData.email,\r\n      }),\r\n    })\r\n      .then(res => res.json())\r\n      .then(data => {\r\n        console.log(data);\r\n      });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <section className={style.section}>\r\n          <p>\r\n            Name:{' '}\r\n            <span className={style.span}>{this.state.userData.fullName}</span>\r\n          </p>\r\n\r\n          <p>\r\n            Email:{' '}\r\n            <span className={style.span}>{this.state.userData.email}</span>\r\n          </p>\r\n        </section>\r\n\r\n        <section>\r\n          <Button text='sign out' fun={this.logout} />\r\n        </section>\r\n        {this.state.showLinkAdmin && (\r\n          <section>\r\n            <Link to='/adminHome'>Transfer to Admin home</Link>\r\n          </section>\r\n        )}\r\n\r\n        <section className={style.change}>\r\n          <div>\r\n            <label>Change UserName</label>\r\n            <input\r\n              type='text'\r\n              placeholder='Enter name'\r\n              onChange={e => this.setState({ name: e.target.value })}\r\n            />\r\n            <Button text='Change' fun={this.changeName} />\r\n          </div>\r\n          <div>\r\n            <label>Change Email</label>\r\n            <input\r\n              type='email'\r\n              placeholder='Enter email'\r\n              onChange={e => this.setState({ email: e.target.value })}\r\n            />\r\n            <Button text='Change' fun={this.changeEmail} />\r\n          </div>\r\n          <div>\r\n            <label>Change Password</label>\r\n            <input\r\n              type='password'\r\n              placeholder='Enter password'\r\n              onChange={e => this.setState({ password: e.target.value })}\r\n            />\r\n          </div>\r\n          <Button text='Change' fun={this.changePassword} />\r\n        </section>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}